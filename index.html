<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Asianloop Staff Portal — Login</title>

  <!-- Favicon (root) -->
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>

  <!-- Styles -->
  <link rel="stylesheet" href="public/css/login.css"/>

  <!-- SEO / Social (optional for the portal) -->
  <meta property="og:title" content="Asianloop Staff Portal"/>
  <meta property="og:description" content="Authorized access for Asianloop staff."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://staff.asian-loop.com/"/>
  <meta property="og:site_name" content="Asianloop"/>
</head>
<body>
  <main class="login-wrap">
    <section class="login-card" aria-label="Staff sign-in">
      <a class="brand" href="/" aria-label="Asianloop Home">
        <img src="/public/images/logo.jpg" alt="Asianloop logo" />
      </a>

      <h1 class="title">Sign in to Asianloop Staff Portal</h1>
      <p class="subtitle">Use your <strong>@asian-loop.com</strong> email and password. Do not share your credentials.</p>

  <form id="loginForm" action="/login" method="post" novalidate>
        <div class="field">
          <label for="email">Work email</label>
          <input id="email" name="email" type="email" placeholder="name@asian-loop.com" autocomplete="username" required />
        </div>

        <div class="field">
          <label for="password">Password</label>
          <input id="password" name="password" type="password" placeholder="••••••••" autocomplete="current-password" required />
        </div>

        <button id="submitBtn" type="submit" class="btn-primary">Sign in</button>

        <p id="msg" class="msg" role="alert" aria-live="polite"></p>

        <div class="links">
          <button type="button" class="link" id="forgotLink" aria-haspopup="dialog" aria-controls="forgotDialog">Forgot password?</button>
          <a class="link" href="mailto:info@asian-loop.com?subject=Staff%20Portal%20Access%20Request">Need access?</a>
        </div>
      </form>
    </section>

    <footer class="footer">
      <button type="button" class="link" id="privacyLink" aria-haspopup="dialog" aria-controls="privacyDialog">Privacy &amp; Acceptable Use</button>
      <span class="sep">•</span>
<a class="link" href="/privacy" rel="noopener">Open full policy</a>
      <div class="copyright">© <span id="year"></span> Asianloop Sdn Bhd — Internal use only.</div>
    </footer>
  </main>

  <!-- Forgot Password Dialog -->
  <dialog id="forgotDialog" class="modal" aria-labelledby="forgotTitle">
    <div class="modal-content">
      <h2 id="forgotTitle">Password Support</h2>
      <p>If you have forgotten your password or are unable to sign in, please contact the <strong>Asianloop IT Department</strong> directly.</p>
      <p>For security reasons, password resets cannot be performed automatically through this portal.</p>
      <p><strong>Contact method:</strong> Send an email to <a href="mailto:info@asian-loop.com">info@asian-loop.com</a> using your registered work email.</p>
      <p>In your message, please include:</p>
      <ul>
        <li>Your full name</li>
        <li>Department or project team</li>
        <li>Your staff ID (if applicable)</li>
        <li>A brief description of your login issue</li>
      </ul>
      <p>Once your request is received, IT will verify your identity and provide reset instructions. This process helps us ensure the safety of all accounts.</p>
      <div class="modal-actions">
        <button type="button" class="btn" data-close="forgotDialog">Close</button>
      </div>
    </div>
  </dialog>

  <!-- Privacy & Acceptable Use Dialog -->
  <dialog id="privacyDialog" class="modal" aria-labelledby="privacyTitle">
    <div class="modal-content">
      <h2 id="privacyTitle">Privacy &amp; Acceptable Use</h2>

      <h3>Account Ownership &amp; Security</h3>
      <p>Your account is tied to your <strong>@asian-loop.com</strong> identity and is for your use only. Keep credentials confidential and follow IT guidance for resets and recovery.</p>

      <h3>Authorized Use</h3>
      <p>Use this portal strictly for legitimate Asianloop work. Do not access, copy, or share information beyond your role or need-to-know.</p>

      <h3>Confidentiality &amp; Data Handling</h3>
      <p>Treat internal documents and data as confidential. Do not upload or share sensitive information to unapproved platforms or personal storage.</p>

      <h3>Monitoring &amp; Logging</h3>
      <p>Access to this portal may be monitored and logged (e.g., login attempts, admin changes) to protect users and systems.</p>

      <h3>Prohibited Activities</h3>
      <p>No unauthorized access attempts, credential sharing, bypassing of security controls, malware, or disruptive activities.</p>

      <h3>Devices &amp; Network</h3>
      <p>Use updated devices and browsers; avoid public/unsafe networks where possible. Report lost/stolen devices with active sessions immediately to IT.</p>

      <h3>Incident Reporting</h3>
      <p>Suspect a breach or see something unusual? Email <a href="mailto:info@asian-loop.com">info@asian-loop.com</a> with relevant details.</p>

      <h3>Consequences of Misuse</h3>
      <p>Violations may result in access suspension, disciplinary action, and/or legal remedies.</p>

      <p>— <strong>Asianloop IT &amp; Security</strong> (contact: <a href="mailto:info@asian-loop.com">info@asian-loop.com</a>)</p>

      <div class="modal-actions">
        <button type="button" class="btn" data-close="privacyDialog">Close</button>
      </div>
    </div>
  </dialog>

  <!-- Minimal page script: accessibility + validation (no auth yet) -->
  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Dialog helpers
    function openDialog(id) {
      const dlg = document.getElementById(id);
      if (dlg && typeof dlg.showModal === 'function') dlg.showModal();
      else alert('Popup: ' + id); // fallback
    }
    function closeDialog(id) {
      const dlg = document.getElementById(id);
      if (dlg && typeof dlg.close === 'function') dlg.close();
    }

    document.getElementById('forgotLink').addEventListener('click', () => openDialog('forgotDialog'));
document.getElementById('privacyLink').addEventListener('click', (e) => {
  // If dialog works, open it and prevent navigation
  const dlg = document.getElementById('privacyDialog');
  if (dlg && typeof dlg.showModal === 'function') {
    e.preventDefault();
    dlg.showModal();
  }
  // else: no JS / no <dialog> support => follow the link to /privacy
});

    document.querySelectorAll('[data-close]').forEach(btn => {
      btn.addEventListener('click', (e) => closeDialog(e.target.getAttribute('data-close')));
    });

    // Close dialogs on backdrop click
    document.querySelectorAll('dialog').forEach(dlg => {
      dlg.addEventListener('click', (e) => {
        const rect = dlg.getBoundingClientRect();
        const inside = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;
        if (!inside) dlg.close();
      });
    });

    // Basic client-side validation (no actual submit/auth yet)
    const form = document.getElementById('loginForm');
    const msg = document.getElementById('msg');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      msg.textContent = '';
      const email = (document.getElementById('email').value || '').trim();
      const pw = document.getElementById('password').value;

      if (!email) { msg.textContent = 'Please enter your work email.'; return; }
      if (!email.toLowerCase().endsWith('@asian-loop.com')) { msg.textContent = 'This portal only accepts @asian-loop.com emails.'; return; }
      if (!pw) { msg.textContent = 'Please enter your password.'; return; }

      // UI-only: show "Signing in…" state then success redirect cue
      submitBtn.disabled = true;
      submitBtn.textContent = 'Signing in…';
      setTimeout(() => {
        msg.textContent = 'Redirecting to your dashboard…';
        submitBtn.textContent = 'Sign in';
        submitBtn.disabled = false;
      }, 900);
    });
  </script>
</body>
</html>
